
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A polyvalent C++ FEM library">
      
      
      
        <link rel="canonical" href="http://polyfem.github.io/polyfem/tutorials/ipc_quick_start_guide/ipc_quick_start_guide/">
      
      
        <link rel="prev" href="../../getting_started/">
      
      
        <link rel="next" href="../../multi-material/multi-material/">
      
      <link rel="icon" href="../../../img/xxx.ico">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.4">
    
    
      
        <title>IPC Quick Start Guide - PolyFEM</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.240905d7.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../theme/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-green" data-md-color-accent="green">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ipc-quick-start-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="PolyFEM" class="md-header__button md-logo" aria-label="PolyFEM" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            PolyFEM
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              IPC Quick Start Guide
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="light-green" data-md-color-accent="green"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
            </label>
          
        
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="green" data-md-color-accent="green"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/polyfem/polyfem" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    polyfem/polyfem
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        General
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../cxx_index/" class="md-tabs__link">
        C++
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../python/" class="md-tabs__link">
        Python
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../getting_started/" class="md-tabs__link md-tabs__link--active">
        Tutorials
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../details/formulations/" class="md-tabs__link">
        Technical Details
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../polysolve/" class="md-tabs__link">
      PolySolve
    </a>
  </li>

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="PolyFEM" class="md-nav__button md-logo" aria-label="PolyFEM" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    PolyFEM
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/polyfem/polyfem" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    polyfem/polyfem
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
      
      
      
        <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
          General
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          General
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../license/" class="md-nav__link">
        License
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          C++
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          C++
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../cxx_index/" class="md-nav__link">
        Home
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../json/" class="md-nav__link">
        JSON Input
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../json_defaults_and_spec/" class="md-nav__link">
        JSON Specification
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://polyfem.github.io/polyfem/" class="md-nav__link">
        Docs
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Python
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Python
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../python/" class="md-nav__link">
        Home
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../python_examples/" class="md-nav__link">
        Jupyter Tutorial
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../polyfempy_doc/" class="md-nav__link">
        Docs
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Tutorials
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          IPC Quick Start Guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        IPC Quick Start Guide
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    Setup
  </a>
  
    <nav class="md-nav" aria-label="Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ipc-default-parameters" class="md-nav__link">
    IPC Default Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hello-world" class="md-nav__link">
    Hello, World!
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#physical-materials-and-time-steppers" class="md-nav__link">
    Physical Materials and Time Steppers
  </a>
  
    <nav class="md-nav" aria-label="Physical Materials and Time Steppers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stiffer-material" class="md-nav__link">
    Stiffer Material
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-materials" class="md-nav__link">
    Multiple Materials
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simulation-time-and-time-step-size" class="md-nav__link">
    Simulation Time and Time Step Size
  </a>
  
    <nav class="md-nav" aria-label="Simulation Time and Time Step Size">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#smaller-time-step-sizes" class="md-nav__link">
    Smaller Time Step Sizes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#larger-time-step-sizes-nearly-quasi-static" class="md-nav__link">
    Larger Time Step Sizes (Nearly Quasi-Static)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#initial-velocity" class="md-nav__link">
    Initial Velocity
  </a>
  
    <nav class="md-nav" aria-label="Initial Velocity">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initial-linear-velocity" class="md-nav__link">
    Initial Linear Velocity
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initial-angular-velocity" class="md-nav__link">
    Initial Angular Velocity
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#collision-obstacles" class="md-nav__link">
    Collision Obstacles
  </a>
  
    <nav class="md-nav" aria-label="Collision Obstacles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#translation" class="md-nav__link">
    Translation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rotation" class="md-nav__link">
    Rotation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codimensional-collisions" class="md-nav__link">
    Codimensional Collisions
  </a>
  
    <nav class="md-nav" aria-label="Codimensional Collisions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#closed-surface" class="md-nav__link">
    Closed Surface
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#open-surface" class="md-nav__link">
    Open Surface
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#edges" class="md-nav__link">
    Edges
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#points" class="md-nav__link">
    Points
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#boundary-conditions" class="md-nav__link">
    Boundary Conditions
  </a>
  
    <nav class="md-nav" aria-label="Boundary Conditions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#selection" class="md-nav__link">
    Selection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dirichlet" class="md-nav__link">
    Dirichlet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#neumann" class="md-nav__link">
    Neumann
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timed-boundary-conditions" class="md-nav__link">
    Timed Boundary Conditions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-settings" class="md-nav__link">
    Advanced Settings
  </a>
  
    <nav class="md-nav" aria-label="Advanced Settings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#input-mesh-sequence" class="md-nav__link">
    Input Mesh Sequence
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#smaller-distance-initialization" class="md-nav__link">
    Smaller Distance Initialization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#newmark-time-integration" class="md-nav__link">
    Newmark Time-Integration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accuracy-control" class="md-nav__link">
    Accuracy Control
  </a>
  
    <nav class="md-nav" aria-label="Accuracy Control">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#time-integration-accuracy" class="md-nav__link">
    Time Integration Accuracy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contact-accuracy" class="md-nav__link">
    Contact Accuracy
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-your-own-mesh" class="md-nav__link">
    Use Your Own Mesh
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restarting-a-simulation" class="md-nav__link">
    Restarting a Simulation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#more-simulation-examples" class="md-nav__link">
    More Simulation Examples
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../multi-material/multi-material/" class="md-nav__link">
        Multi-Material
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../screw/screw/" class="md-nav__link">
        Screwing a Bolt into a Nut
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../trajectory-optimization/trajectory-optimization/" class="md-nav__link">
        Trajectory Optimization
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_6" >
      
      
      
        <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
          Robotics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_6">
          <span class="md-nav__icon md-icon"></span>
          Robotics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sphere-pushing-box/sphere-pushing-box/" class="md-nav__link">
        Pushing A Box
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sling-shot/sling-shot/" class="md-nav__link">
        Sling-shot
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vision-proprioception/vision-proprioception/" class="md-nav__link">
        Vision Proprioception
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          Technical Details
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Technical Details
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../details/formulations/" class="md-nav__link">
        Formulations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../details/problems/" class="md-nav__link">
        Problems
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../details/time_integrators/" class="md-nav__link">
        Time Integrators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../details/solvers/" class="md-nav__link">
        Solvers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../details/contact/" class="md-nav__link">
        Contact
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../details/miscellaneous/" class="md-nav__link">
        Miscellaneous
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../polysolve/" class="md-nav__link">
        PolySolve
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    Setup
  </a>
  
    <nav class="md-nav" aria-label="Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ipc-default-parameters" class="md-nav__link">
    IPC Default Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hello-world" class="md-nav__link">
    Hello, World!
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#physical-materials-and-time-steppers" class="md-nav__link">
    Physical Materials and Time Steppers
  </a>
  
    <nav class="md-nav" aria-label="Physical Materials and Time Steppers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stiffer-material" class="md-nav__link">
    Stiffer Material
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-materials" class="md-nav__link">
    Multiple Materials
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simulation-time-and-time-step-size" class="md-nav__link">
    Simulation Time and Time Step Size
  </a>
  
    <nav class="md-nav" aria-label="Simulation Time and Time Step Size">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#smaller-time-step-sizes" class="md-nav__link">
    Smaller Time Step Sizes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#larger-time-step-sizes-nearly-quasi-static" class="md-nav__link">
    Larger Time Step Sizes (Nearly Quasi-Static)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#initial-velocity" class="md-nav__link">
    Initial Velocity
  </a>
  
    <nav class="md-nav" aria-label="Initial Velocity">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initial-linear-velocity" class="md-nav__link">
    Initial Linear Velocity
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initial-angular-velocity" class="md-nav__link">
    Initial Angular Velocity
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#collision-obstacles" class="md-nav__link">
    Collision Obstacles
  </a>
  
    <nav class="md-nav" aria-label="Collision Obstacles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#translation" class="md-nav__link">
    Translation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rotation" class="md-nav__link">
    Rotation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codimensional-collisions" class="md-nav__link">
    Codimensional Collisions
  </a>
  
    <nav class="md-nav" aria-label="Codimensional Collisions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#closed-surface" class="md-nav__link">
    Closed Surface
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#open-surface" class="md-nav__link">
    Open Surface
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#edges" class="md-nav__link">
    Edges
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#points" class="md-nav__link">
    Points
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#boundary-conditions" class="md-nav__link">
    Boundary Conditions
  </a>
  
    <nav class="md-nav" aria-label="Boundary Conditions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#selection" class="md-nav__link">
    Selection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dirichlet" class="md-nav__link">
    Dirichlet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#neumann" class="md-nav__link">
    Neumann
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timed-boundary-conditions" class="md-nav__link">
    Timed Boundary Conditions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-settings" class="md-nav__link">
    Advanced Settings
  </a>
  
    <nav class="md-nav" aria-label="Advanced Settings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#input-mesh-sequence" class="md-nav__link">
    Input Mesh Sequence
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#smaller-distance-initialization" class="md-nav__link">
    Smaller Distance Initialization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#newmark-time-integration" class="md-nav__link">
    Newmark Time-Integration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accuracy-control" class="md-nav__link">
    Accuracy Control
  </a>
  
    <nav class="md-nav" aria-label="Accuracy Control">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#time-integration-accuracy" class="md-nav__link">
    Time Integration Accuracy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contact-accuracy" class="md-nav__link">
    Contact Accuracy
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-your-own-mesh" class="md-nav__link">
    Use Your Own Mesh
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restarting-a-simulation" class="md-nav__link">
    Restarting a Simulation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#more-simulation-examples" class="md-nav__link">
    More Simulation Examples
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                



                  

  
  


<h1 id="ipc-quick-start-guide">IPC Quick Start Guide<a class="headerlink" href="#ipc-quick-start-guide" title="Permanent link">&para;</a></h1>
<div class="md-source-date"><small>Author: Zachary Ferguson</small></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is a retelling of the original <a href="https://github.com/ipc-sim/IPC/wiki">IPC Quick Start Guide</a> from the original IPC codebase.</p>
</div>
<h2 id="setup">Setup<a class="headerlink" href="#setup" title="Permanent link">&para;</a></h2>
<p>The first step is to clone and build PolyFEM (see <a href="../../../cxx_index/">here</a> for instructions). This will create the <code>PolyFEM_bin</code> executable that we will use to run the examples. To run an example you can use the following command:</p>
<div class="highlight"><pre><span></span><code>./PolyFEM_bin<span class="w"> </span>-j<span class="w"> </span>&lt;path/to/example.json&gt;<span class="w"> </span>-o<span class="w"> </span>&lt;path/to/output/dir&gt;
</code></pre></div>
<p>You can also use the <code>--help</code> flag to see all the available options.</p>
<!-- We will assume all the example JSON files are in a directory `tutorial`. -->

<p>All files used in this tutorial can be found <a href="https://github.com/polyfem/polyfem.github.io/tree/docs/docs/tutorials/ipc_quick_start_guide/input">here</a>.</p>
<h3 id="ipc-default-parameters">IPC Default Parameters<a class="headerlink" href="#ipc-default-parameters" title="Permanent link">&para;</a></h3>
<p>Since many of the default parameters in PolyFEM differ from those in the original IPC codebase, we provide a JSON file <a href="../input/ipc-defaults.json"><code>ipc-defaults.json</code></a> which maps the default parameter values from IPC to their equivalent parameters in PolyFEM. This file is then included in all the example JSON files using <code>"common": "ipc-defaults.json"</code>.</p>
<div class="admonition todo">
<p class="admonition-title">Todo</p>
<p>Describe what each of the default parameters controls.</p>
</div>
<h2 id="hello-world">Hello, World!<a class="headerlink" href="#hello-world" title="Permanent link">&para;</a></h2>
<p>Let us start with a &ldquo;Hello, World!&rdquo; example of two cubes falling onto a ground plane.</p>
<p>The input JSON for this scene can be found at <a href="../input/2-cubes-falling.json"><code>2-cubes-falling.json</code></a>. To run this example, use the following command:</p>
<div class="highlight"><pre><span></span><code>./PolyFEM_bin<span class="w"> </span>-j<span class="w"> </span><span class="m">2</span>-cubes-falling.json<span class="w"> </span>-o<span class="w"> </span><span class="m">2</span>-cubes-falling
</code></pre></div>
<p>This will create a directory <code>2-cubes-falling</code> with the following files:</p>
<div class="highlight"><pre><span></span><code>$ ls 2-cubes-falling
sim.pvd step_0.vtm step_0.vtu [...] step_200.vtm step_200.vtu
</code></pre></div>
<p>We can open the PVD file using <a href="https://www.paraview.org/">ParaView</a> and play the animation to visualize the simulation:</p>
<video loop muted controls>
<source src="../videos/2-cubes-falling.mp4" type="video/mp4">
</video>

<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>In ParaView, make sure to press the WarpByVector <img src="../WarpByVector.png" alt="WarpByVector" width="20px"> button to see the deformed animation. Otherwise, you will only see the undeformed rest mesh.</p>
</div>
<hr />
<p>Let’s take a look at the input JSON file <a href="../input/2-cubes-falling.json"><code>2-cubes-falling.json</code></a>:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;common&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ipc-defaults.json&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;geometry&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">        </span><span class="nt">&quot;mesh&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cube.msh&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;transformation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;translation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;volume_selection&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;mesh&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cube.msh&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;transformation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;translation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;volume_selection&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;mesh&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;plane.obj&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;is_obstacle&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="p">}],</span>
<span class="w">    </span><span class="nt">&quot;contact&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;friction_coefficient&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>The config is simple:</p>
<ul>
<li><code>"common"</code>: this includes the default IPC parameters from the <code>ipc-defaults.json</code> file.</li>
<li><code>"geometry"</code>: the geometry of the scene comprised of two cubes and a ground plane.<ul>
<li><code>"mesh"</code>: the path to the mesh file (a tetrahedral mesh <code>cube.msh</code> for the cubes and a triangular mesh <code>plane.obj</code> for the ground plane).</li>
<li><code>"transformation"</code>: transform the input mesh before running the simulation.<ul>
<li><code>"translation"</code>: translate the first cube up by 3 units and the second cube up by 1 unit.</li>
</ul>
</li>
<li><code>"volume_selection"</code>: assigns an ID to the volume (uniformly) which we will use later.</li>
<li><code>"is_obstacle"</code>: specify that the ground plane is a static obstacle.<ul>
<li>Obstacles are non-simulated geometries with prescribed displacements (here default to zero).</li>
</ul>
</li>
</ul>
</li>
<li><code>"contact"</code>: parameters for the contact model<ul>
<li><code>"friction_coefficient"</code>: coefficient of friction for all contacts.</li>
</ul>
</li>
</ul>
<h2 id="physical-materials-and-time-steppers">Physical Materials and Time Steppers<a class="headerlink" href="#physical-materials-and-time-steppers" title="Permanent link">&para;</a></h2>
<p>Now let’s make some changes to the hello world script to make the simulation more interesting.</p>
<h3 id="stiffer-material">Stiffer Material<a class="headerlink" href="#stiffer-material" title="Permanent link">&para;</a></h3>
<p>The default material parameters in <code>ipc-default.json</code> are:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&quot;materials&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NeoHookean&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;E&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1e5</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;nu&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.4</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;rho&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span>
<span class="p">}</span>
</code></pre></div>
<p>This corresponds to a NeoHookean material with Young’s modulus <span class="arithmatex">\(E = 10^5~\text{Pa}\)</span>, Poisson’s ratio <span class="arithmatex">\(\nu = 0.4\)</span>, and density <span class="arithmatex">\(\rho = 1000~\frac{\text{kg}}{\text{m}^3}\)</span>.</p>
<p>We can change these parameters for all objects in the scene by changing Young&rsquo;s modulus to <span class="arithmatex">\(10^6~\text{Pa}\)</span>:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;common&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2-cubes-falling.json&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;materials&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;E&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1e6</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Notice that we changed the <code>"common"</code> parameter to point to the starting example <code>2-cubes-falling.json</code>. This means our changes in this file will be applied on top of the changes in the starting example (which also are applied on top of the default parameters in <code>ipc-defaults.json</code>).</p>
</div>
<p>This will make Young’s modulus 10x larger than the default while keeping density and Poisson’s ratio the same. Let’s see what we get:</p>
<video loop muted controls>
<source src="../videos/stiffer.mp4" type="video/mp4">
</video>

<p>Yes! The boxes are stiffer now.</p>
<h3 id="multiple-materials">Multiple Materials<a class="headerlink" href="#multiple-materials" title="Permanent link">&para;</a></h3>
<p>We can also set different materials for different objects:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;common&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2-cubes-falling.json&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;materials&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NeoHookean&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;E&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1e8</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;nu&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.4</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;rho&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3000</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NeoHookean&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;E&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1e5</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;nu&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.4</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;rho&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span>
<span class="w">    </span><span class="p">}]</span>
<span class="p">}</span>
</code></pre></div>
<p>We replace our single <code>"materials"</code> object with a list of objects with <code>"id"</code> keys. These IDs correspond to the <code>"volume_selection"</code> from earlier. In general, <code>"volume_selection"</code> allows us to select a subset of the mesh&rsquo;s elements and assign a volume ID to them. In this case, we assign a uniform ID to all elements in the cube mesh. Where the first cube gets an ID of 1 and the second gets an ID of 2. We then use these volume IDs to assign different materials to each cube. The first cube gets a material that is 3× heavier and 1000× stiffer. While the second cube gets the original material.</p>
<video loop muted controls>
<source src="../videos/heavy-top.mp4" type="video/mp4">
</video>

<p>Here we rendered softer material with a light yellow color. As we see the top box is nearly rigid now and the bottom box deforms more. Even with this super stiff material PolyFEM stays robust and accurate.</p>
<h3 id="simulation-time-and-time-step-size">Simulation Time and Time Step Size<a class="headerlink" href="#simulation-time-and-time-step-size" title="Permanent link">&para;</a></h3>
<p>Following the default in IPC, we have been simulating the scene for 5 seconds with a time step size of 0.025s, generating 200 frames.</p>
<h4 id="smaller-time-step-sizes">Smaller Time Step Sizes<a class="headerlink" href="#smaller-time-step-sizes" title="Permanent link">&para;</a></h4>
<p>One option to get more energetic animation (while sticking with implicit Euler stepping &ndash; see also Newmark stepping below) is to apply smaller time step sizes to reduce the numerical damping of implicit Euler time integration:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;common&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2-cubes-falling.json&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;dt&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.005</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>The <code>"time"</code> parameter here controls time step size <code>"dt": 0.005</code>, which results in a more energetic animation:</p>
<video loop muted controls>
<source src="../videos/smaller-dt.mp4" type="video/mp4">
</video>

<h4 id="larger-time-step-sizes-nearly-quasi-static">Larger Time Step Sizes (Nearly Quasi-Static)<a class="headerlink" href="#larger-time-step-sizes-nearly-quasi-static" title="Permanent link">&para;</a></h4>
<p>One of the exciting features of IPC and PolyFEM is that it is robust enough to support extremely large time step sizes on the order of seconds with implicit Euler. In turn, this enables rapid solutions of equilibrium conditions subject to contact, friction and large deformation (via nearly quasi-static solves under numerical damping). For a simple demonstration, we can simulate our hello world example with <span class="arithmatex">\(\Delta t = 1~\text{s}\)</span>:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;common&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2-cubes-falling.json&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;dt&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>The animation now is composed of only five frames, one for each second. As we see numerical damping is so large that the cubes are barely bouncing.</p>
<video loop muted controls>
<source src="../videos/larger-dt.mp4" type="video/mp4">
</video>

<h2 id="initial-velocity">Initial Velocity<a class="headerlink" href="#initial-velocity" title="Permanent link">&para;</a></h2>
<p>To set nonzero initial velocities for objects, we need to specify them as <code>"initial_conditions"</code>.</p>
<h3 id="initial-linear-velocity">Initial Linear Velocity<a class="headerlink" href="#initial-linear-velocity" title="Permanent link">&para;</a></h3>
<p>For example, we can set the initial velocity of the top cube to be <span class="arithmatex">\(-20~\frac{\text{m}}{\text{s}}\)</span> in the y direction:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;common&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2-cubes-falling.json&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;initial_conditions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;velocity&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">-20</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">]</span>
<span class="w">        </span><span class="p">}]</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Again here we are using the volume IDs to select the top cube.</p>
<video loop muted controls>
<source src="../videos/initial-linear-velocity.mp4" type="video/mp4">
</video>

<p>Even for this high-speed impact scene, PolyFEM stays robust and accurate without numerical instabilities or explosions.</p>
<h3 id="initial-angular-velocity">Initial Angular Velocity<a class="headerlink" href="#initial-angular-velocity" title="Permanent link">&para;</a></h3>
<p>Instead of using a constant value for the initial velocity, we can use a tiny expression dependent on the positions.</p>
<p>We can specify an initial angular velocity by computing</p>
<div class="arithmatex">\[
\begin{bmatrix}\omega_x &amp; \omega_y &amp; \omega_z\end{bmatrix}
\times
\begin{bmatrix}x &amp; y &amp; z\end{bmatrix}
\]</div>
<p>where <span class="arithmatex">\(\omega_{\{x, y, z\}}\)</span> are the angular velocity in radians and <span class="arithmatex">\(x\)</span>, <span class="arithmatex">\(y\)</span>, and <span class="arithmatex">\(z\)</span> are the positions to be evaluated at.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This assumes the center of rotation is at the origin. If you want to rotate around a different point, you need to translate the positions to the origin first.</p>
</div>
<p>For example, if we want to rotate the top cube 90 degrees/second around the y-axis, then we compute the initial velocity as</p>
<div class="arithmatex">\[
\begin{bmatrix}0 &amp; \frac{\pi}{2} &amp; 0\end{bmatrix}
\times
\begin{bmatrix}x &amp; y &amp; z\end{bmatrix}
=
\begin{bmatrix}\frac{\pi}{2}z &amp; 0 &amp; -\frac{\pi}{2}x\end{bmatrix}
\]</div>
<p>In the JSON we encode this as a string containing the expression:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;common&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2-cubes-falling.json&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;initial_conditions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;velocity&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;pi/2 * z&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;-pi/2 * x&quot;</span><span class="p">]</span>
<span class="w">        </span><span class="p">}]</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>and voila now the top cube is spinning!</p>
<video loop muted controls>
<source src="../videos/initial-angular-velocity.mp4" type="video/mp4">
</video>

<h2 id="collision-obstacles">Collision Obstacles<a class="headerlink" href="#collision-obstacles" title="Permanent link">&para;</a></h2>
<p>In many simulations we want to script the motion of certain objects, the best way to do this is to specify the object as an obstacle and then specify the prescribed displacement.</p>
<h3 id="translation">Translation<a class="headerlink" href="#translation" title="Permanent link">&para;</a></h3>
<p>To make the second code an obstacle all we need to do is set <code>"is_obstacle": true</code>.
Then we can specify the displacement of this obstacle using the <code>"boundary_conditions/obstacle_displacements"</code> field:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;common&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2-cubes-falling.json&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;geometry&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">        </span><span class="nt">&quot;mesh&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cube.msh&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;transformation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;translation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;volume_selection&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;mesh&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cube.msh&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;transformation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;translation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;surface_selection&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;is_obstacle&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;mesh&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;plane.obj&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;is_obstacle&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="p">}],</span>
<span class="w">    </span><span class="nt">&quot;boundary_conditions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;obstacle_displacements&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;t&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;t&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;t&quot;</span><span class="p">]</span>
<span class="w">        </span><span class="p">}]</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Notice that we changed the <code>"volume_selection"</code> to <code>"surface_selection"</code> because we need to identify the surface on which the boundary conditions apply.</p>
<p>We set the obstacle&rsquo;s displacement to <code>["t", "t", "t"]</code> which means the obstacle will translate with a velocity of <span class="arithmatex">\([1, 1, 1]\)</span> m/s.</p>
<video loop muted controls>
<source src="../videos/translating-obstacle.mp4" type="video/mp4">
</video>

<h3 id="rotation">Rotation<a class="headerlink" href="#rotation" title="Permanent link">&para;</a></h3>
<p>Making the second cube rotate is a bit trickier. We can compute the displacement in Euler’s angle representation as</p>
<div class="arithmatex">\[
\begin{bmatrix}
\Delta{x} \\ \Delta{y} \\ \Delta{z}
\end{bmatrix}
=
R_x(\omega_x t) R_y(\omega_y t) R_z(\omega_z t)
\left(
\begin{bmatrix}
x \\ y \\ z
\end{bmatrix}
-
\begin{bmatrix}
c_x \\ c_y \\ c_z
\end{bmatrix}
\right)
+
\begin{bmatrix}
c_x \\ c_y \\ c_z
\end{bmatrix}
-
\begin{bmatrix}
x \\ y \\ z
\end{bmatrix}
\]</div>
<p>where <span class="arithmatex">\(\Delta\{x,y,z\}\)</span> are the obstacle displacement, <span class="arithmatex">\(\omega_{\{x,y,z\}}\)</span> are the angular velocities, <span class="arithmatex">\(c_{\{x,y,z\}}\)</span> is the center of rotation, <span class="arithmatex">\(R_{\{x,y,z\}}\)</span> are the axis-aligned rotation matrices, and <span class="arithmatex">\(x\)</span>, <span class="arithmatex">\(y\)</span>, and <span class="arithmatex">\(z\)</span> are the positions to be evaluated at. Computing this by hand can be annoying, so instead, you can use <a href="../rotating-obstacle/">this Python notebook</a> to compute the expression.</p>
<p>As an example, here we kinematically rotate the second cube with an angular velocity of <span class="arithmatex">\([10, 90, 0]\)</span> degrees/second:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;common&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;translating-obstacle.json&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;boundary_conditions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;obstacle_displacements&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="s2">&quot;x*cos(pi*t/2) - x + z*sin(pi*t/2)&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;x*sin(pi*t/18)*sin(pi*t/2) - y - z*sin(pi*t/18)*cos(pi*t/2) + (y - 1)*cos(pi*t/18) + 1&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;-x*sin(pi*t/2)*cos(pi*t/18) + z*cos(pi*t/18)*cos(pi*t/2) - z + (y - 1)*sin(pi*t/18)&quot;</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}]</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<video loop muted controls>
<source src="../videos/rotating-obstacle.mp4" type="video/mp4">
</video>

<p>Here we render obstacles in grey.</p>
<h3 id="codimensional-collisions">Codimensional Collisions<a class="headerlink" href="#codimensional-collisions" title="Permanent link">&para;</a></h3>
<p>IPC contact handling is based on distances and so directly supports codimensional (surfaces, edges, points) kinematic collision obstacles!</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Currently, PolyFEM does not yet include simulated codimensional materials like shells or rods.</p>
</div>
<h4 id="closed-surface">Closed Surface<a class="headerlink" href="#closed-surface" title="Permanent link">&para;</a></h4>
<p>If we script the motion of an object, then for a closed surface the interior tessellation is unnecessary, and we can directly use a surface mesh (<code>.obj</code> file)!</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;common&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;rotating-obstacle.json&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;geometry&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">        </span><span class="nt">&quot;mesh&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cube.msh&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;transformation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;translation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;volume_selection&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;mesh&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cube.obj&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;transformation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;translation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;surface_selection&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;is_obstacle&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;mesh&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;plane.obj&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;is_obstacle&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="p">}]</span>
<span class="p">}</span>
</code></pre></div>
<p>This is equivalent to using a volumetric mesh because PolyFEM automatically extracts and uses the surface for obstacles.</p>
<video loop muted controls>
<source src="../videos/rotating-obstacle-surface.mp4" type="video/mp4">
</video>

<h4 id="open-surface">Open Surface<a class="headerlink" href="#open-surface" title="Permanent link">&para;</a></h4>
<p>This script replaces the cube with a single triangle (zero volume):</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;common&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;rotating-obstacle.json&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;geometry&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">        </span><span class="nt">&quot;mesh&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cube.msh&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;transformation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;translation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;volume_selection&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;mesh&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;triangle.obj&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;transformation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;translation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;surface_selection&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;is_obstacle&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;mesh&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;plane.obj&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;is_obstacle&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="p">}]</span>
<span class="p">}</span>
</code></pre></div>
<video loop muted controls>
<source src="../videos/rotating-obstacle-triangle.mp4" type="video/mp4">
</video>

<h4 id="edges">Edges<a class="headerlink" href="#edges" title="Permanent link">&para;</a></h4>
<p>This script uses the same single triangle but only with its edges. Here we also scale the triangle 2× larger to let the box fall through.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;common&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;rotating-obstacle.json&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;geometry&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">        </span><span class="nt">&quot;mesh&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cube.msh&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;transformation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;translation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;volume_selection&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;mesh&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;triangle.obj&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;transformation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;translation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;scale&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;surface_selection&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;is_obstacle&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;extract&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;edges&quot;</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;mesh&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;plane.obj&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;is_obstacle&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="p">}]</span>
<span class="p">}</span>
</code></pre></div>
<p>The <code>"extract": "edges"</code> specifies that only the edges of the triangle mesh should be used.</p>
<video loop muted controls>
<source src="../videos/rotating-obstacle-edges.mp4" type="video/mp4">
</video>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Alternatively, you can load an edge mesh directly by specifying an <code>.obj</code> file with line elements. For example, this is the same edge mesh in OBJ format:
<div class="highlight"><pre><span></span><code>v -0.5 0 -0.5
v  0.5 0 -0.5
v -0.5 0  0.5
l 1 3
l 3 2
l 2 1
</code></pre></div></p>
</div>
<h4 id="points">Points<a class="headerlink" href="#points" title="Permanent link">&para;</a></h4>
<p>Even crazier, this script uses the same single triangle but only with its points. Here we also scale the point cloud 0.7× smaller to let the box hit the points.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;common&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;rotating-obstacle.json&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;geometry&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">        </span><span class="nt">&quot;mesh&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cube.msh&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;transformation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;translation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;volume_selection&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;mesh&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;triangle.obj&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;transformation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;translation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;scale&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.7</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;surface_selection&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;is_obstacle&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;extract&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;points&quot;</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;mesh&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;plane.obj&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;is_obstacle&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="p">}]</span>
<span class="p">}</span>
</code></pre></div>
<p>We use the <code>"extract": "points"</code> to only use the points of the triangle.</p>
<video loop muted controls>
<source src="../videos/rotating-obstacle-points.mp4" type="video/mp4">
</video>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Alternatively, you can load a point cloud directly by specifying an <code>.obj</code> file with no triangles or edges. For example, this is the same point cloud in OBJ format:
<div class="highlight"><pre><span></span><code>v -0.5 0 -0.5
v  0.5 0 -0.5
v -0.5 0  0.5
</code></pre></div></p>
</div>
<h2 id="boundary-conditions">Boundary Conditions<a class="headerlink" href="#boundary-conditions" title="Permanent link">&para;</a></h2>
<h3 id="selection">Selection<a class="headerlink" href="#selection" title="Permanent link">&para;</a></h3>
<p>Similar to how we apply material, to apply boundary conditions we first need to select which nodes to which to apply the boundary conditions using the <code>"point_selection"</code> mesh field. Then, we can specify the boundary conditions in the <code>"boundary_conditions"</code> field.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;common&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2-cubes-falling.json&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;geometry&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">        </span><span class="nt">&quot;mesh&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cube.msh&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;transformation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;translation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;volume_selection&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;mesh&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cube.msh&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;transformation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;translation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;volume_selection&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;point_selection&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;box&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">],</span>
<span class="w">                </span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">]</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;relative&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">        </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;box&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">[</span><span class="mf">0.9</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.9</span><span class="p">],</span>
<span class="w">                </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">]</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;relative&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">        </span><span class="p">}]</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;mesh&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;plane.obj&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;is_obstacle&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="p">}],</span>
<span class="w">    </span><span class="nt">&quot;output&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;paraview&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;points&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Let&rsquo;s break down the <code>"point_selection"</code> field. The first object
<div class="highlight"><pre><span></span><code><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="nt">&quot;box&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">],</span>
<span class="w">    </span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">]</span>
<span class="p">],</span>
<span class="nt">&quot;relative&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
</code></pre></div>
specifies that we should assign an ID of <code>1</code> to the nodes in the back left of the mesh. The second object
<div class="highlight"><pre><span></span><code><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="nt">&quot;box&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">[</span><span class="mf">0.9</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.9</span><span class="p">],</span>
<span class="w">    </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">]</span>
<span class="p">],</span>
<span class="nt">&quot;relative&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
</code></pre></div>
specifies that we should assign an ID of <code>2</code> to the nodes in the front right of the mesh.</p>
<p>The <code>"box"</code> parameter specifies a bounding box by minimum and maximum corners in which points are selected. Notice the <code>"relative": true</code> field which indicates the box&rsquo;s coordinates are relative to the bounding box of the mesh. If we set <code>"relative": false</code> then the coordinates are in world space.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For more information about how to setup boundary conditions (including the more ubiquitous surface selections) look <a href="../../getting_started/#boundary-conditions">here</a>.</p>
</div>
<h3 id="dirichlet">Dirichlet<a class="headerlink" href="#dirichlet" title="Permanent link">&para;</a></h3>
<p>For a simulated volumetric object, sometimes we script the motion of part of its vertices as Dirichlet boundary conditions. Using our point selections we can specify the boundary conditions as follows:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;common&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;point-selection.json&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;boundary_conditions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;dirichlet_boundary&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;-0.2 * t&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;-0.2 * t&quot;</span><span class="p">]</span>
<span class="w">        </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;0.2 * t&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;0.2 * t&quot;</span><span class="p">]</span>
<span class="w">        </span><span class="p">}]</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>The above script specifies that we should apply a displacement of <span class="arithmatex">\([-0.2, 0, -0.2]\)</span> m/s to the nodes with ID <code>1</code> and a displacement of <span class="arithmatex">\([0.2, 0, 0.2]\)</span> m/s to the nodes with ID <code>2</code>. The expressions in strings are evaluated using <a href="https://github.com/codeplea/tinyexpr">TinyExpr</a>. You can find out more about these expressions <a href="../../getting_started/#spatially-varying-boundary-conditions">here</a> and <a href="../../getting_started/#time-dependent-boundary-conditions">here</a>.</p>
<p>Now let&rsquo;s see what we get:</p>
<video loop muted controls>
<source src="../videos/dirichlet-bcs.mp4" type="video/mp4">
</video>

<p>As we see PolyFEM is robust even when there is large deformation.</p>
<p>What is different here from setting kinematic collision obstacles is that the unselected vertices are still degree-of-freedoms that are simulated. If one selects all vertices of an object by, for example, using a selection of
<div class="highlight"><pre><span></span><code><span class="nt">&quot;point_selection&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
</code></pre></div>
and set them with Dirichlet boundary conditions, it will be essentially identical to a kinematic collision obstacle.</p>
<h3 id="neumann">Neumann<a class="headerlink" href="#neumann" title="Permanent link">&para;</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Nodal Neumann boundary conditions are not yet supported in PolyFEM, so we will setup a similar scene using surface selection.</p>
</div>
<p>We can also add extra forces to part of the vertices of simulated volumetric objects in addition to gravity. This can be similarly realized by specifying the <code>"neumann_boundary"</code> like how we did for Dirichlet boundary conditions above:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;common&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;point-selection.json&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;geometry&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">        </span><span class="nt">&quot;mesh&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cube-hex.msh&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;transformation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;translation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;volume_selection&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;mesh&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cube-hex.msh&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;transformation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;translation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;volume_selection&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;surface_selection&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;mesh&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;plane.obj&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;is_obstacle&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="p">}],</span>
<span class="w">    </span><span class="nt">&quot;boundary_conditions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;neumann_boundary&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="s2">&quot;2.5e4 * sign(x) * max(0, sign(x * z))&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="mi">0</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;2.5e4 * sign(z) * max(0, sign(x * z))&quot;</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;output&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;paraview&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;options&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;forces&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Similar to the configuration in our Dirichlet example, the above script applies an a force of <span class="arithmatex">\([-2.5 \times 10^4, 0, -2.5  \times 10^4]\)</span> N to the vertices in the left-back and <span class="arithmatex">\([2.5 \times 10^4, 0, 2.5  \times 10^4]\)</span> N to the vertices in the right-front:</p>
<video loop muted controls>
<source src="../videos/neumann-bcs.mp4" type="video/mp4">
</video>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Here simulate a hexahedral mesh, but we use a linear triangular mesh for contact handling.
Additionally, the rendering shows a triangulation of the hexahedral mesh&rsquo;s surface.</p>
</div>
<p>Unlike Dirichlet boundary conditions, here the Neumann boundary condition does not restrict the vertical motion of the object, and it elongates the object only to a static state but not further.</p>
<h3 id="timed-boundary-conditions">Timed Boundary Conditions<a class="headerlink" href="#timed-boundary-conditions" title="Permanent link">&para;</a></h3>
<p>It is also possible to start and stop boundary conditions at a specific time. This can be done by utilizing tiny expressions:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;common&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;point-selection.json&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;boundary_conditions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;dirichlet_boundary&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;-0.2 * min(t, 2.5)&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;-0.2 * min(t, 2.5)&quot;</span><span class="p">]</span>
<span class="w">        </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;0.2 * max(t - 2.5, 0)&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;0.2 * max(t - 2.5, 0)&quot;</span><span class="p">]</span>
<span class="w">        </span><span class="p">}]</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Here we apply a displacement of <span class="arithmatex">\([-0.2, 0, -0.2]\)</span> m/s to the nodes with ID <code>1</code> from time <span class="arithmatex">\(t=0\)</span> to <span class="arithmatex">\(t=2.5\)</span> and a displacement of <span class="arithmatex">\([0.2, 0, 0.2]\)</span> m/s to the nodes with ID <code>2</code> from time <span class="arithmatex">\(t=2.5\)</span> to <span class="arithmatex">\(t=\infty\)</span>. We can see this if we plot the x/z-displacement of the BC nodes:
<center><img src="../timed-bcs.svg" width="50%"></center>
where the red line is the displacement of the nodes with ID <code>1</code> and the blue line is the displacement of the nodes with ID <code>2</code>.</p>
<p>Finally, let&rsquo;s see what we get:</p>
<video loop muted controls>
<source src="../videos/timed-bcs.mp4" type="video/mp4">
</video>

<h2 id="advanced-settings">Advanced Settings<a class="headerlink" href="#advanced-settings" title="Permanent link">&para;</a></h2>
<h3 id="input-mesh-sequence">Input Mesh Sequence<a class="headerlink" href="#input-mesh-sequence" title="Permanent link">&para;</a></h3>
<p>The way of setting kinematic collision obstacles displacements described earlier is expressive but a bit verbose. To support more complex scripting of kinematic collision objects, PolyFEM allows the use of input mesh file sequences.</p>
<p>For example, we can specify a folder path to the kinematic collision objects:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;common&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2-cubes-falling.json&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;geometry&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">        </span><span class="nt">&quot;mesh&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cube.msh&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;transformation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;translation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;volume_selection&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;mesh_sequence&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;transformation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;translation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mf">-0.6666666667</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mf">-0.6666666667</span><span class="p">]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;mesh_sequence&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sequence&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;fps&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;is_obstacle&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;mesh&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;plane.obj&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;is_obstacle&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="p">}]</span>
<span class="p">}</span>
</code></pre></div>
<p>In the specified folder <code>sequence</code> we provide the mesh files of the triangle wire in each frame as <code>*.obj</code>. Note that the input sequence must maintain the correct vertex correspondence to the one throughout the entire sequence.</p>
<video loop muted controls>
<source src="../videos/mesh-sequence.mp4" type="video/mp4">
</video>

<!-- ### Attaching Configuration Initialization -->
<h3 id="smaller-distance-initialization">Smaller Distance Initialization<a class="headerlink" href="#smaller-distance-initialization" title="Permanent link">&para;</a></h3>
<p>IPC requires a tiny positive gap as it does not support the 0-distance configurations.</p>
<p>The following script sets the upper box in the hello world example right above the lower one:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;common&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2-cubes-falling.json&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;geometry&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">        </span><span class="nt">&quot;mesh&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cube.msh&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;transformation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;translation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mf">2.001</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;volume_selection&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;mesh&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cube.msh&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;transformation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;translation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;volume_selection&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;mesh&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;plane.obj&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;is_obstacle&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="p">}]</span>
<span class="p">}</span>
</code></pre></div>
<video loop muted controls>
<source src="../videos/smaller-distance.mp4" type="video/mp4">
</video>

<p>Note the initial gap here is barely visible. In our experience we can set IPC’s contact gap as small as practically needed; i.e., even small enough to fool the ray intersection checks in rendering algorithms.</p>
<!-- Thus rendering of transparent objects with IPC's small gaps can even have artifacts for valid non-intersecting configurations of the contact surfaces (so, for example, to render the IPC “squeeze out” example, we manually set offsets in the renderer despite having physically correct non-intersecting shapes).  -->
<p>Similarly, no two objects can have 0-distance separation : ); even atoms are at distance from each other.</p>
<h3 id="newmark-time-integration">Newmark Time-Integration<a class="headerlink" href="#newmark-time-integration" title="Permanent link">&para;</a></h3>
<p>Along with implicit Euler, PolyFEM supports other time integration methods such as implicit Newmark time integration. Implicit Newmark can be applied for improved energy preservation and control. To change the time integrator we can simply set the time integration method.</p>
<p>For example, the following script uses the <code>time/integrator</code> key to specify implicit Newmark (<code>"ImplicitNewmark"</code>) should be the time integrator for the stiffer boxes scene without friction. By default, <code>"integrator"</code> is set to <code>ImplicitEuler</code> (backward Euler).</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;common&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;stiffer.json&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;dt&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.005</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;integrator&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ImplicitNewmark&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;contact&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;friction_coefficient&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Damping can be useful both for predictive or realistic simulation control of damping and also to extend the effective stability of the underlying Newmark time integration method. For example, here we use Rayleigh damping of elasticity:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;common&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;newmark.json&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;solver&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;rayleigh_damping&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;form&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;elasticity&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;stiffness_ratio&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Here we set the damping stiffness as a ratio <span class="arithmatex">\(\kappa_\text{ratio}\)</span> between 0 and 1. The absolute damping stiffness will be set to <span class="arithmatex">\(\tfrac{3}{4} \kappa_\text{ratio} \Delta t^3\)</span>. If <span class="arithmatex">\(\kappa_\text{ratio}=1\)</span>, at the beginning of time-step Newmark&rsquo;s incremental potential Hessian (with damping term) will be equal to that of implicit Euler. This provides a starting basis for intuitively setting damping stiffness. To alternately directly set damping stiffness use the key <code>"stiffness"</code>.</p>
<p>Here in this demo note that we used a smaller time step size at <code>0.005</code>s as this is better for the stability of Newmark integration.</p>
<table>
<thead>
<tr>
<th align="center">Newmark, <code>"stiffness_ratio": 0.1</code></th>
<th align="center">Newmark, <code>"stiffness_ratio": 0.2</code></th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><video loop muted controls><source src="../videos/rayleigh-damping-ratio=0.1.mp4" type="video/mp4"></video></td>
<td align="center"><video loop muted controls><source src="../videos/rayleigh-damping-ratio=0.2.mp4" type="video/mp4"></video></td>
</tr>
<tr>
<td align="center">Newmark, <code>"stiffness_ratio": 0.4</code></td>
<td align="center">Backwards Euler</td>
</tr>
<tr>
<td align="center"><video loop muted controls><source src="../videos/rayleigh-damping-ratio=0.4.mp4" type="video/mp4"></video></td>
<td align="center"><video loop muted controls><source src="../videos/backwards-euler.mp4" type="video/mp4"></video></td>
</tr>
</tbody>
</table>
<h3 id="accuracy-control">Accuracy Control<a class="headerlink" href="#accuracy-control" title="Permanent link">&para;</a></h3>
<h4 id="time-integration-accuracy">Time Integration Accuracy<a class="headerlink" href="#time-integration-accuracy" title="Permanent link">&para;</a></h4>
<p>Nonlinear solver accuracy determines how accurate the dynamic time step solve is satisfied. To set the requested nonlinear solver accuracy, we can use the <code>solver/nonlinear/grad_norm</code> key to set Newton tolerance on the infinity norm of the Newton increment.</p>
<p>So far, we have used</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;solver&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;nonlinear&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;grad_norm&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1e-05</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>The solver will stop once the current Newton increment cannot change any nodal position larger than <code>1e-5</code> m even if a full step is taken. Reducing this improves accuracy, but note that the compute cost can then go up.</p>
<h4 id="contact-accuracy">Contact Accuracy<a class="headerlink" href="#contact-accuracy" title="Permanent link">&para;</a></h4>
<p>There are three additional accuracies for IPC. Each controls a contact accuracy in IPC: the barrier activation distance (<code>"dhat"</code>) which IPC uses to determine if objects are in contact and exert contact forces; the tangent velocity (<code>"epsv"</code>) determining where IPC sees the touching objects as not sliding and so exerts static friction forces; and the maximum amount of friction iterations (<code>"friction_iterations"</code>) that IPC updates friction tangent and normal forces.</p>
<p>By default PolyFEM uses
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;contact&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;dhat&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1e-3</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;epsv&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1e-3</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;solver&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;contact&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;friction_iterations&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Unlike the original IPC code, these values are <strong>not</strong> scaled by the bounding box size.</p>
</div>
<p>The default setting provides a good trade-off between accuracy and efficiency, where there are no visible gaps, no obvious sliding artifacts, or friction force in inaccurate directions.</p>
<p>We can set <code>"friction_iterations"</code> set to <code>-1</code> to iterate until the tangent operator and normal force converges to obtain even more accurate results. Note that IPC does not guarantee convergence for this case. In practice, for more accurate friction in large deformation or high-speed impact scenes, <code>"friction_iterations"</code> at <code>2</code>~<code>4</code> so far appears generally sufficient.</p>
<h3 id="use-your-own-mesh">Use Your Own Mesh<a class="headerlink" href="#use-your-own-mesh" title="Permanent link">&para;</a></h3>
<p>For collision obstacles (including closed surfaces), one can directly specify the path to their mesh files (<code>.obj</code>, <code>.stl</code>, <code>.ply</code>, etc.) in the script to use it.</p>
<p>For the simulated objects that are tetrahedral meshes, PolyFEM supports <a href="https://gmsh.info/doc/texinfo/gmsh.html#File-formats">MSH</a> files. PolyFEM supports both ASCII and binary encoded version 2.2 and 4.1 files through the use of <a href="https://github.com/qnzhou/MshIO">MshIO</a>.</p>
<p>To generate a tetrahedral mesh from a triangle mesh, we recommend using <a href="https://github.com/wildmeshing/fTetWild">fTetWild</a>.</p>
<h3 id="restarting-a-simulation">Restarting a Simulation<a class="headerlink" href="#restarting-a-simulation" title="Permanent link">&para;</a></h3>
<p>To learn how to restart a simulation, see <a href="../../../json/#restart">here</a>.</p>
<h2 id="more-simulation-examples">More Simulation Examples<a class="headerlink" href="#more-simulation-examples" title="Permanent link">&para;</a></h2>
<p>Hopefully, now you know the basics of how to use IPC within PolyFEM. For more examples, we have set up all the simulations in the original IPC paper (and more!) and you can find them all <a href="https://github.com/polyfem/polyfem-data/tree/main/contact/examples">here</a>.</p>
<p>If you have any further questions, feel free to post an <a href="https://github.com/polyfem/polyfem/issues">issue</a> on the PolyFEM GitHub repo.</p>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      2023-10-04
    
  </small>
</div>





                

              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2018–2023 PolyFEM Group; <a href="https://github.com/polyfem/polyfem/blob/main/LICENSE">MIT License</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/polyfem" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.expand", "search.suggest", "search.highlight"], "search": "../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.19047be9.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
        <script src="../../../js/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>